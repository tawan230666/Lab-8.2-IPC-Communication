# üîÑ Lab 8.2: IPC Communication  
## ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Main Process ‡πÅ‡∏•‡∏∞ Renderer Process

### üéì ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå ‡∏õ‡∏µ‡∏ó‡∏µ‡πà 2  
**‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤:** 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå

---

## üéØ ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå (Learning Objectives)
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö Lab ‡∏ô‡∏µ‡πâ ‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:
- üîÑ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î **IPC (Inter-Process Communication)** ‡πÉ‡∏ô Electron  
- üõ°Ô∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á **preload.js** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ API ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (contextIsolation)  
- üì§ ‡πÉ‡∏ä‡πâ `ipcRenderer.invoke()` ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Renderer ‚Üí Main  
- üì• ‡πÉ‡∏ä‡πâ `ipcMain.handle()` ‡∏£‡∏±‡∏ö/‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏• ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ Renderer  
- üîß ‡∏™‡∏£‡πâ‡∏≤‡∏á **API ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô** ‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ (‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏´‡∏•‡∏î/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏≠‡πÄ‡∏à‡∏ô‡∏ï‡πå)  
- üìä ‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö **Agent Wallboard** (‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‡∏Ø‡∏•‡∏Ø)

---

## ‚úÖ Prerequisites
- ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô JavaScript/HTML/CSS  
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Node.js + npm  
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Electron (devDependency)  

---

## üóÇÔ∏è ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
```
lab8-2-ipc/
‚îú‚îÄ‚îÄ main.js          # Main Process + IPC handlers
‚îú‚îÄ‚îÄ preload.js       # Security bridge (contextBridge)
‚îú‚îÄ‚îÄ index.html       # UI + ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å window.electronAPI
‚îú‚îÄ‚îÄ agent-data.json  # ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á agents
‚îî‚îÄ‚îÄ package.json
```

---

## üß† ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (IPC Flow)
```
Renderer (UI) ‚îÄ‚îÄ invoke() ‚îÄ‚ñ∂  Preload (bridge) ‚îÄ‚îÄ invoke() ‚îÄ‚ñ∂ Main (handle)
Renderer ‚óÄ‚îÄ result ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Preload ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Main (return data)
```
- Renderer ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `window.electronAPI.*`  
- Preload ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢ `ipcRenderer.invoke(channel, payload)`  
- Main ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô `ipcMain.handle(channel, handler)` ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤

---

## üîê ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ
- `webPreferences: { nodeIntegration: false, contextIsolation: true, preload: ... }`  
- ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞ API ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡πà‡∏≤‡∏ô `contextBridge.exposeInMainWorld('electronAPI', {...})`  
- (‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô CSP ‡πÉ‡∏ô DevTools ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á Warning ‡∏ï‡∏≠‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤)

---

## ‚ñ∂Ô∏è ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ô
```bash
npm install
npm start
```

---

## üß™ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏¥‡∏ï‡πÉ‡∏ô‡πÄ‡∏î‡πÇ‡∏°
- üì§ **‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°** ‡∏à‡∏≤‡∏Å Renderer ‡πÑ‡∏õ Main ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö JSON ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö  
- üëã **‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢** (sayHello) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ß‡∏•‡∏≤/‡∏ä‡∏∑‡πà‡∏≠  
- üìä **‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Agents** ‡∏à‡∏≤‡∏Å `agent-data.json` ‡∏ú‡πà‡∏≤‡∏ô IPC  
- üîÑ **‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Agent** ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå (simulate persistence)

---

## üé• ‡πÄ‡∏î‡πÇ‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô (Lab 8.2 ‚Äì IPC)
> ‡∏ô‡∏≥‡πÑ‡∏ü‡∏•‡πå‡∏Ñ‡∏•‡∏¥‡∏õ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå ‡πÄ‡∏ä‡πà‡∏ô `docs/media/lab8-2-demo.mp4` ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏ß‡∏ô‡∏ù‡∏±‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ö‡∏ô GitHub ‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

<video src="./docs/media/lab8-2-demo.mp4" controls width="720"></video>

> ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏•‡∏¥‡∏õ > 100MB ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ Git LFS ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡∏î‡πâ‡∏ß‡∏¢ ffmpeg:  
> `ffmpeg -i input.mp4 -vcodec libx264 -crf 28 -preset veryfast -acodec aac -b:a 128k docs/media/lab8-2-demo.mp4`

---

## üìë ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á API ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ Renderer (preload.js)
- `sendMessage(message)` ‚Äì ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ Main  
- `sayHello(name)` ‚Äì ‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢ + ‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (th-TH)  
- `getAgents()` ‚Äì ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏≠‡πÄ‡∏à‡∏ô‡∏ï‡πå‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå  
- `changeAgentStatus(agentId, newStatus)` ‚Äì ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

---

## üß∞ ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö/‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢
- **`getAgents is not a function`** ‚Üí ‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤ preload ‡πÑ‡∏î‡πâ **expose** ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö ‡πÅ‡∏•‡∏∞ **main.js** ‡∏ä‡∏µ‡πâ `preload.js` ‡∏ñ‡∏π‡∏Å‡πÑ‡∏ü‡∏•‡πå/‡∏û‡∏≤‡∏ò  
- **`Cannot bind an API on top of an existing property on the window object`** ‚Üí ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `exposeInMainWorld('electronAPI', ...)` ‡∏ã‡πâ‡∏≥‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏£‡∏ß‡∏°‡πÇ‡∏Ñ‡πâ‡∏î expose ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)  
- **CSP Warning** ‚Üí ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ï‡∏≠‡∏ô Dev (‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏î‡πâ)

---

## üèÅ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Lab
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ **IPC invoke/handle**  
- ‡πÉ‡∏ä‡πâ **preload.js** ‡∏™‡∏£‡πâ‡∏≤‡∏á bridge ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢  
- ‡∏™‡∏£‡πâ‡∏≤‡∏á UI ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ **API ‡∏ù‡∏±‡πà‡∏á Main** ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö  
- ‡∏ß‡∏≤‡∏á‡∏£‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **Agent Wallboard** (‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•/‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞)

---

## üöÄ Next Steps
- Lab 8.3: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Native APIs / ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏•‡πå / Notification  
- Lab 8.4: Real-time (WebSocket) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏î  
- Lab 8.5: Build ‡πÅ‡∏•‡∏∞ Distribution (Windows/macOS/Linux)
